<form [formGroup]="formularioDeVacacion">
  <div>
    <h5>HISTORIAL DE VACACIONES</h5>
  </div>
  <div class="contenedor-general">
    <div class="search-container">
      <input type="text" formControlName="searchKeyword" placeholder="Filtrar" (change)="filterVacaciones()">
      <button class="btn" (click)="searchVacaciones()">Buscar</button>
    </div>
    <div class="table-responsive">
      <table class="table ">
        <thead>
          <tr>
            <th (click)="sort('id_vacaciones')">
              Id
              <img src="./assets/arrow-drop-up.svg" alt="Orden ascendente"
                *ngIf="sortColumn === 'id_vacaciones' && sortDirection === 'asc'">
              <img src="./assets/arrow-down-drop.svg" alt="Orden descendente"
                *ngIf="sortColumn === 'id_vacaciones' && sortDirection === 'desc'">
            </th>
            <!-- <th (click)="sort('apellido')">Apellido</th>
            <th (click)="sort('nombre')">Nombre</th> -->
            <th (click)="sort('fecha_solicitud')">
              Fecha Solicitud
              <img src="./assets/arrow-drop-up.svg" alt="Orden ascendente"
                *ngIf="sortColumn === 'fecha_solicitud' && sortDirection === 'asc'">
              <img src="./assets/arrow-down-drop.svg" alt="Orden descendente"
                *ngIf="sortColumn === 'fecha_solicitud' && sortDirection === 'desc'">
            </th>
            <th (click)="sort('fecha_inicio_vacaciones')">
              Inicio Vacaciones
              <img src="./assets/arrow-drop-up.svg" alt="Orden ascendente"
                *ngIf="sortColumn === 'fecha_inicio_vacaciones' && sortDirection === 'asc'">
              <img src="./assets/arrow-down-drop.svg" alt="Orden descendente"
                *ngIf="sortColumn === 'fecha_inicio_vacaciones' && sortDirection === 'desc'">
            </th>
            <th (click)="sort('fecha_fin_vacaciones')">
              Fin Vacaciones
              <img src="./assets/arrow-drop-up.svg" alt="Orden ascendente"
                *ngIf="sortColumn === 'fecha_fin_vacaciones' && sortDirection === 'asc'">
              <img src="./assets/arrow-down-drop.svg" alt="Orden descendente"
                *ngIf="sortColumn === 'fecha_fin_vacaciones' && sortDirection === 'desc'">
            </th>
            <th (click)="sort('fecha_respuesta')">
              Fecha Respuesta
              <img src="./assets/arrow-drop-up.svg" alt="Orden ascendente"
                *ngIf="sortColumn === 'fecha_respuesta' && sortDirection === 'asc'">
              <img src="./assets/arrow-down-drop.svg" alt="Orden descendente"
                *ngIf="sortColumn === 'fecha_respuesta' && sortDirection === 'desc'">
            </th>
            <th (click)="sort('dias_lab_solicitados')">
              Días Solicitados
              <img src="./assets/arrow-drop-up.svg" alt="Orden ascendente"
                *ngIf="sortColumn === 'dias_lab_solicitados' && sortDirection === 'asc'">
              <img src="./assets/arrow-down-drop.svg" alt="Orden descendente"
                *ngIf="sortColumn === 'dias_lab_solicitados' && sortDirection === 'desc'">
            </th>
            <!-- <th (click)="sort('dias_disponibles_acum')">Días Disponibles</th> -->
            <th (click)="sort('status')">
              Estado
              <img src="./assets/arrow-drop-up.svg" alt="Orden ascendente"
                *ngIf="sortColumn === 'status' && sortDirection === 'asc'">
              <img src="./assets/arrow-down-drop.svg" alt="Orden descendente"
                *ngIf="sortColumn === 'status' && sortDirection === 'desc'">
            </th>
            <!-- <th (click)="sort('peticion')">Peticion</th> -->
            <th (click)="sort('observaciones')">
              Observaciones
              <img src="./assets/arrow-drop-up.svg" alt="Orden ascendente"
                *ngIf="sortColumn === 'observaciones' && sortDirection === 'asc'">
              <img src="./assets/arrow-down-drop.svg" alt="Orden descendente"
                *ngIf="sortColumn === 'observaciones' && sortDirection === 'desc'">
            </th>
            <th (click)="sort('motivo')">
              Motivo
              <img src="./assets/arrow-drop-up.svg" alt="Orden ascendente"
                *ngIf="sortColumn === 'motivo' && sortDirection === 'asc'">
              <img src="./assets/arrow-down-drop.svg" alt="Orden descendente"
                *ngIf="sortColumn === 'motivo' && sortDirection === 'desc'">
            </th>
            <th *ngIf="false">ACCIONES</th>
          </tr>
        </thead>


        <tbody>
          <tr *ngFor="let row of pagedVacaciones; let iControl=index">
            <td>{{ row.id_vacaciones }}</td>            
            <td>{{ row.fecha_solicitud }}</td>
            <td>{{ row.fecha_inicio_vacaciones }}</td>
            <td>{{ row.fecha_fin_vacaciones }}</td>
            <td>{{ row.fecha_respuesta }}</td>
            <td>{{ row.dias_lab_solicitados }}</td>
            <!-- <td>{{ row.dias_disponibles_acum }}</td> -->
            <td>{{ row.status }}</td>
            <!-- <td>{{ row.peticion }}</td> -->
            <td>{{ row.observaciones }}</td>
            <td>{{ row.motivo }}</td>            
          </tr>
        </tbody>
      </table>
    </div>

    <div class="pagination-container">
      <ul class="pagination">
        <li class="page-item" [class.disabled]="currentPage === 1">
          <a class="page-link" (click)="changePage(1)" aria-label="First">
            <span aria-hidden="true">&laquo;</span>
          </a>
        </li>
        <li class="page-item" [class.disabled]="currentPage === 1">
          <a class="page-link" (click)="changePage(currentPage - 1)" aria-label="Previous">
            <span aria-hidden="true">&lsaquo;</span>
          </a>
        </li>
        <li class="page-item" *ngFor="let page of pages" [class.active]="page === currentPage">
          <a class="page-link" (click)="changePage(page)">{{ page }}</a>
        </li>
        <li class="page-item" [class.disabled]="currentPage === totalPages">
          <a class="page-link" (click)="changePage(currentPage + 1)" aria-label="Next">
            <span aria-hidden="true">&rsaquo;</span>
          </a>
        </li>
        <li class="page-item" [class.disabled]="currentPage === totalPages">
          <a class="page-link" (click)="changePage(totalPages)" aria-label="Last">
            <span aria-hidden="true">&raquo;</span>
          </a>
        </li>
      </ul>
    </div>
    <div class="card-header d-flex justify-content-center">
      <a *ngIf="false" class="btn btn-success mr-2" routerLink="/agregar-candidato/">AGREGAR NUEVO CANDIDATO</a>
      <a class="btn btn-warning" (click)="exportToCSV()" role="button">DESCARGAR EXCEL</a>
    </div>
  </div>
</form>